<!DOCTYPE html>
<html>
<head>
<style>body{padding-left:1.875rem;}</style><meta charset='UTF-8'>
</head>
<body><p>&nbsp; &nbsp; &nbsp; &nbsp;xml解析技术和反射机制如果不懂建议去百度，因为一下是围绕这两种技术来进行操作的，在这里我先简单的科普一下，xml解析技术顾名思义是解析xml文件的，xml是一种标记语言，额，具体的我也不知道怎么说，xml也可以去了解一下，xml解析技术有4种，dom，dom4j还有两种忘了，我也懒得去百度找，我自己琢磨出来的这个方法应该使用了dom解析技术，反射机制官话是说可以通过反射任意的获取到Java类的私有变量名和方法名，还有一段是关于对象的，自己去科普哈，总而言之，反射就像是一篇镜子，通过镜子我们能知道我们长什么样，同样，通过反射能看到类有什么东西，好了，废话不多讲，直接上代码：</p><p>&nbsp; &nbsp; &nbsp; &nbsp; XMLUtile.java:这个类主要是用来获取到xml文件里面的数据和写入数据，现在我只知道读写，不知道删改，删改的话可以查出来改然后再写入</p><p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span>以下代码没有依赖外部包，所使用的全是jdk自带的包，所以放心粘贴和导入</span></p><pre><p>public class&nbsp;XMLUtil {</p><p><span> /**</span><span> </span></p><p><span> * 查找节点，并返回第一个符合条件节点</span></p><span> *<br></span><span> * </span><span>@param </span><span>express<br></span><span> </span><span>* </span><span>@param </span><span>source<br></span><span> </span><span>* </span><span>@return<br></span><span> </span><span>*/<br></span><span>public static </span>Node selectSingleNode(String express, Object source) {<br>    Node result = <span>null</span>;<br>    XPathFactory xpathFactory = XPathFactory.<span>newInstance</span>();<br>    XPath xpath = xpathFactory.newXPath();<br>    <span>try </span>{<br>        result = (Node) xpath.evaluate(express, source, XPathConstants.<span>NODE</span>);<br>    } <span>catch </span>(XPathExpressionException e) {<br>        e.printStackTrace();<br>    }<br>    <span>return </span>result;<br>}<br><span>/**<br></span><span> * 查找节点，返回符合条件的节点集。<br></span><span> * </span><span>@param </span><span>express<br></span><span> </span><span>* </span><span>@param </span><span>source<br></span><span> </span><span>* </span><span>@return<br></span><span> </span><span>*/<br></span><span>public static </span>NodeList selectNodes(String express, Object source) {<br>    NodeList result = <span>null</span>;<br>    XPathFactory xpathFactory = XPathFactory.<span>newInstance</span>();<br>    XPath xpath = xpathFactory.newXPath();<br>    <span>try </span>{<br>        result = (NodeList) xpath.evaluate(express, source,<br>                XPathConstants.<span>NODESET</span>);<br>    } <span>catch </span>(XPathExpressionException e) {<br>        e.printStackTrace();<br>    }<br>    <span>return </span>result;<br>}<br><span>/**<br></span><span> * 将Document输出到文件<br></span><span> * </span><span>@param </span><span>fileName<br></span><span> </span><span>* </span><span>@param </span><span>doc<br></span><span> </span><span>*/<br></span><span>public static void </span>saveXml(String fileName, Document doc) {<br>    TransformerFactory transFactory = TransformerFactory.<span>newInstance</span>();<br>    <span>try </span>{<br>        Transformer transformer = transFactory.newTransformer();<br>        transformer.setOutputProperty(<span>"indent"</span>, <span>"yes"</span>);<br>        DOMSource source = <span>new </span>DOMSource();<br>        source.setNode(doc);<br>        StreamResult result = <span>new </span>StreamResult();<br>        result.setOutputStream(<span>new </span>FileOutputStream(fileName));<br>        transformer.transform(source, result);<br>    } <span>catch </span>(Exception e) {<br>        e.printStackTrace();<br>    }<br>  }
}</pre><p><span>&nbsp; &nbsp; &nbsp; &nbsp;</span>ReflexUtil.java:</p><pre><p><span><br></span></p><p><span>/**</span></p><span> * 通过反射将xml的数据封装到实体内<br></span><span> * </span><span>@param </span><span>data 需要被封装数据的节点<br></span><span> </span><span>* </span><span>@param </span><span>pathName xml文件路径<br></span><span> </span><span>* </span><span>@param </span><span>model 模块名，即xml文件的头节点<br></span><span> </span><span>*/<br></span><span>public static void </span>setData(Object data,String pathName,String model) <span>throws </span>Exception {<br>    DocumentBuilderFactory factory = DocumentBuilderFactory.<span>newInstance</span>();<br>    Element theBook = <span>null</span>, theElem = <span>null</span>, root = <span>null</span>;<br>    <span>try</span>{<br>        factory.setIgnoringElementContentWhitespace(<span>true</span>);<br>        DocumentBuilder db = factory.newDocumentBuilder();<br>        Document xmldoc = (Document) db.parse(<span>new </span>File(pathName));<br>        root = xmldoc.getDocumentElement();<br>        Field[] fileds = data.getClass().getDeclaredFields();<span>//获取所有属性字段<br></span><span>        </span><span>for</span>(Field field : fileds){<br>            String attributeName = field.getName();<span>//获取属性名<br></span><span>            </span><span>if</span>(<span>"serialVersionUID"</span>.equals(attributeName)){<br>                <span>continue</span>;<br>            }<br>            String methodName=attributeName.substring(<span>0</span>,<span>1</span>).toUpperCase()+attributeName.substring(<span>1</span>);<br>            <span>//Method getMethod=data.getClass().getMethod("get"+methodName);//获取构造getter方法<br></span><span>            //Object attributeValue = getMethod.invoke(data);//通过getter方法取值<br></span><p><span>            //if(attributeValue == null &amp;&amp; field.getGenericType()
</span><p>                .toString().equals("class java.lang.String")){
                 Method setMethod=data.getClass()</p></p>                .getMethod(<span>"set"</span>+methodName,String.<span>class</span>);<span>//构造setter方法<br></span><span>                </span>theBook = (Element) XMLUtil.<span>selectSingleNode</span>(<span>"/"</span>+model+<span>"/"</span>+attributeName,<br>                        root);<br>                setMethod.invoke(data,theBook.getTextContent());<span>//通过setter方法为属性重新赋值<br></span><span>            //}<br></span><span>        </span>}<br>    }<span>catch</span>(Exception e){<br>        e.printStackTrace();<br>        <span>throw </span>e;<br>    }<br>}<br>/**
  *修改xml文件内容
  *data 带有数据修改后的实体
  *pathName xml文件路径
  *model 模块名，即xml文件中的头节点，一般是需要取值的节点的父节点名，可以看看Data.xml中我写的介绍<br><span>public static void </span>updateData(Object data,String pathName,String model) <span>throws </span>Exception {<br>    DocumentBuilderFactory factory = DocumentBuilderFactory.<span>newInstance</span>();<br>    Element theBook = <span>null</span>, theElem = <span>null</span>, root = <span>null</span>;<br>    <span>try</span>{<br>        factory.setIgnoringElementContentWhitespace(<span>true</span>);<br>        DocumentBuilder db = factory.newDocumentBuilder();<br>        Document xmldoc = (Document) db.parse(<span>new </span>File(pathName));<br>        root = xmldoc.getDocumentElement();<br>        Field[] fileds = data.getClass().getDeclaredFields();<span>//获取所有属性<br></span><span>        </span><span>for</span>(Field field : fileds){<br>            String attributeName = field.getName();<span>//获取属性名<br></span><span>            </span><span>if</span>(<span>"serialVersionUID"</span>.equals(attributeName)){<br>                <span>continue</span>;<br>            }<br>            String methodName=attributeName.substring(<span>0</span>,<span>1</span>).toUpperCase()+attributeName.substring(<span>1</span>);<br>            <span>//Method getMethod=data.getClass().getMethod("get"+methodName);//构造getter方法<br></span><span>            //Object attributeValue = getMethod.invoke(data);//通过getter方法取值<br></span><span>            //if(attributeValue == null &amp;&amp; field.getGenericType().toString().equals("class java.lang.String")){<br></span><span>            </span>Method setMethod=data.getClass().getMethod(<span>"set"</span>+methodName,String.<span>class</span>);<span>//构造setter方法<br></span><span>            </span>theBook = (Element) XMLUtil.<span>selectSingleNode</span>(<span>"/"</span>+model+<span>"/"</span>+attributeName,<br>                    root);<br>            <span>//setMethod.invoke(data,theBook.getTextContent());//通过setter方法为属性重新赋值<br></span><span>            </span>Method getMethod=data.getClass().getMethod(<span>"get"</span>+methodName);<span>//构造getter方法<br></span><span>            </span>Object attributeValue = getMethod.invoke(data);<span>//通过getter方法取值<br></span><span>            </span><span>if</span>(attributeValue != <span>null</span>) {<br>                theBook.setTextContent(attributeValue.toString());<br>                XMLUtil.<span>saveXml</span>(pathName, xmldoc);<br>            }<br>            <span>//}<br></span><span>        </span>}<br>    }<span>catch</span>(Exception e){<br>        e.printStackTrace();<br>        <span>throw </span>e;<br><p>    }</p>}
xml文件:
Data.xml
<pre><span>&lt;?</span><span>xml version</span><span>="1.0" </span><span>encoding</span><span>="UTF-8" </span><span>standalone</span><span>="no"</span><span>?&gt;<br></span><p><span>&lt;</span><span>shouye</span><span>&gt;#“{}”包围的节点内容为shouye节点下的内容，shouye即头节点，也是被“{}”包围的节点的父节点，所以当
#你要取这个节点的节点，设置model为“shouye”</span></p>    #{
<span>    &lt;</span><span>title</span><span>&gt;</span>**个人博客<span>&lt;/</span><span>title</span><span>&gt;</span><br>    <span>&lt;</span><span>tag</span><span>&gt;</span>一个爱好Java编程的程序员<span>&lt;/</span><span>tag</span><span>&gt;</span><br>    <span>&lt;</span><span>menus1</span><span>&gt;</span>个人介绍<span>&lt;/</span><span>menus1</span><span>&gt;</span><br>    <span>&lt;</span><span>menus2</span><span>&gt;</span>个人相册<span>&lt;/</span><span>menus2</span><span>&gt;</span><br>    <span>&lt;</span><span>menus3</span><span>&gt;</span>作品展示<span>&lt;/</span><span>menus3</span><span>&gt;</span><br>    <span>&lt;</span><span>menus4</span><span>&gt;</span>文章展示<span>&lt;/</span><span>menus4</span><span>&gt;</span><br>    <span>&lt;</span><span>menus5</span><span>&gt;</span>留言<span>&lt;/</span><span>menus5</span><span>&gt;</span><br>    <span>&lt;</span><span>img1</span><span>&gt;</span>images/templatemo_home2.jpg<span>&lt;/</span><span>img1</span><span>&gt;</span><br>    <span>&lt;</span><span>img2</span><span>&gt;</span>images/templatemo_home1.jpg<span>&lt;/</span><span>img2</span><span>&gt;</span><br>    <span>&lt;</span><span>img3</span><span>&gt;</span>images/templatemo_home3.jpg<span>&lt;/</span><span>img3</span><span>&gt;</span><br><p>    <span>&lt;</span><span>img4</span><span>&gt;</span>images/templatemo_home4.jpg<span>&lt;/</span><span>img4</span><span>&gt;
    #}</span></p><span>&lt;/</span><span>shouye</span><span>&gt;</span></pre><p>实体类:</p><p>Data.java</p><pre><p>public class Data implements Serializable {</p>    <span>private static final long </span><span>serialVersionUID </span>= <span>1916666892136634110L</span>;<br>    <span>private </span>String <span>title</span>;<br>    <span>private </span>String <span>tag</span>;<br>    <span>private </span>String <span>menus1</span>;<br>    <span>private </span>String <span>menus2</span>;<br>    <span>private </span>String <span>menus3</span>;<br>    <span>private </span>String <span>menus4</span>;<br>    <span>private </span>String <span>menus5</span>;<br>    <span>private </span>String <span>img1</span>;<br>    <span>private </span>String <span>img2</span>;<br>    <span>private </span>String <span>img3</span>;<br>    <span>private </span>String <span>img4</span>;<br><br>    <span>public </span>String getTitle() {<br>        <span>return </span><span>title</span>;<br>    }<br><br>    <span>public void </span>setTitle(String title) {<br>        <span>this</span>.<span>title </span>= title;<br>    }<br><br>    <span>public </span>String getTag() {<br>        <span>return </span><span>tag</span>;<br>    }<br><br>    <span>public void </span>setTag(String tag) {<br>        <span>this</span>.<span>tag </span>= tag;<br>    }<br><br>    <span>public </span>String getMenus1() {<br>        <span>return </span><span>menus1</span>;<br>    }<br><br>    <span>public void </span>setMenus1(String menus1) {<br>        <span>this</span>.<span>menus1 </span>= menus1;<br>    }<br><br>    <span>public </span>String getMenus2() {<br>        <span>return </span><span>menus2</span>;<br>    }<br><br>    <span>public void </span>setMenus2(String menus2) {<br>        <span>this</span>.<span>menus2 </span>= menus2;<br>    }<br><br>    <span>public </span>String getMenus3() {<br>        <span>return </span><span>menus3</span>;<br>    }<br><br>    <span>public void </span>setMenus3(String menus3) {<br>        <span>this</span>.<span>menus3 </span>= menus3;<br>    }<br><br>    <span>public </span>String getMenus4() {<br>        <span>return </span><span>menus4</span>;<br>    }<br><br>    <span>public void </span>setMenus4(String menus4) {<br>        <span>this</span>.<span>menus4 </span>= menus4;<br>    }<br><br>    <span>public </span>String getMenus5() {<br>        <span>return </span><span>menus5</span>;<br>    }<br><br>    <span>public void </span>setMenus5(String menus5) {<br>        <span>this</span>.<span>menus5 </span>= menus5;<br>    }<br><br>    <span>public </span>String getImg1() {<br>        <span>return </span><span>img1</span>;<br>    }<br><br>    <span>public void </span>setImg1(String img1) {<br>        <span>this</span>.<span>img1 </span>= img1;<br>    }<br><br>    <span>public </span>String getImg2() {<br>        <span>return </span><span>img2</span>;<br>    }<br><br>    <span>public void </span>setImg2(String img2) {<br>        <span>this</span>.<span>img2 </span>= img2;<br>    }<br><br>    <span>public </span>String getImg3() {<br>        <span>return </span><span>img3</span>;<br>    }<br><br>    <span>public void </span>setImg3(String img3) {<br>        <span>this</span>.<span>img3 </span>= img3;<br>    }<br><br>    <span>public </span>String getImg4() {<br>        <span>return </span><span>img4</span>;<br>    }<br><br>    <span>public void </span>setImg4(String img4) {<br>        <span>this</span>.<span>img4 </span>= img4;<br>    }<br><br>    <span>@Override<br></span><span>    </span><span>public </span>String toString() {<br>        <span>return </span><span>"Data{" </span>+<br>                <span>"title='" </span>+ <span>title </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", tag='" </span>+ <span>tag </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", menus1='" </span>+ <span>menus1 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", menus2='" </span>+ <span>menus2 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", menus3='" </span>+ <span>menus3 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", menus4='" </span>+ <span>menus4 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", menus5='" </span>+ <span>menus5 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", img1='" </span>+ <span>img1 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", img2='" </span>+ <span>img2 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", img3='" </span>+ <span>img3 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>", img4='" </span>+ <span>img4 </span>+ <span>'</span><span>\'</span><span>' </span>+<br>                <span>'}'</span>;<br>    }<br>}<br></pre><p>业务方法调用setData：</p><pre><p>public class ServiceTest{</p><p><span>public </span>Data getData() <span>throws </span>Exception {</p>    Data data = <span>new </span>Data();<br>    FileUtil fileUtil = <span>new </span>FileUtil();<br>    <span>setData</span>(data, <span>"/resources/Data.xml"</span>,<span>"shouye"</span>);<br>    <span>return </span>data;<br>}
}
<br></pre></pre></body>
</html>
