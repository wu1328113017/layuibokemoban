<!DOCTYPE html>
<html>
<head>
<style>body{padding:1.875rem;}</style><meta charset='UTF-8'>
</head>
<body><p>在菜鸟教程上学习的，特此记录下来</p><p>链接：<a target="_blank" href="https://www.runoob.com/java/java-sending-email.html">https://www.runoob.com/java/java-sending-email.html</a></p><p>可以按照教程上的将mail和activation.jar添加到classpath中，</p><p>添加方式可以引用<a target="_blank" href="https://www.iteye.com/blog/zyjustin9-2172445">https://www.iteye.com/blog/zyjustin9-2172445</a></p><p>也可以使用maven依赖的方式</p><p>pom代码：</p><pre><span>&lt;!--发送邮件 email--&gt;<br></span><span>&lt;!-- https://mvnrepository.com/artifact/javax.mail/mail --&gt;<br></span><span>&lt;</span><span>dependency</span><span>&gt;</span><br>    <span>&lt;</span><span>groupId</span><span>&gt;</span>javax.mail<span>&lt;/</span><span>groupId</span><span>&gt;</span><br>    <span>&lt;</span><span>artifactId</span><span>&gt;</span>mail<span>&lt;/</span><span>artifactId</span><span>&gt;</span><br>    <span>&lt;</span><span>version</span><span>&gt;</span>1.4.5<span>&lt;/</span><span>version</span><span>&gt;</span><br><span>&lt;/</span><span>dependency</span><span>&gt;</span><br><span>&lt;!-- https://mvnrepository.com/artifact/javax.activation/activation --&gt;<br></span><span>&lt;</span><span>dependency</span><span>&gt;</span><br>    <span>&lt;</span><span>groupId</span><span>&gt;</span>javax.activation<span>&lt;/</span><span>groupId</span><span>&gt;</span><br>    <span>&lt;</span><span>artifactId</span><span>&gt;</span>activation<span>&lt;/</span><span>artifactId</span><span>&gt;</span><br>    <span>&lt;</span><span>version</span><span>&gt;</span>1.1.1<span>&lt;/</span><span>version</span><span>&gt;</span><br><span>&lt;/</span><span>dependency</span><span>&gt;</span></pre><p>可以参考菜鸟教程上一步一步来，也可以看一下我封装的一些简单的方法</p><pre><span>public class </span>SendEmailServiceImpl <span>implements </span>ISendEmailService {<br>    <span>//QQ授权码<br></span><span>    </span><span>private final </span>String <span>AUTHORIZATIONCODE </span>= <span>"wctiswmvdvsdihgi"</span>;<br>    <span>//发件人邮箱<br></span><span>    </span><span>private final </span>String <span>FROM </span>= <span>"1328113017@qq.com"</span>;<br><br>    <span>/**<br></span><span>     * 发送邮件<br></span><span>     * </span><span>@param </span><span>to </span><span>收件人邮箱<br></span><span>     * </span><span>@param </span><span>from </span><span>发件人邮箱<br></span><span>     * </span><span>@param </span><span>subject </span><span>邮件内容主题<br></span><span>     * </span><span>@param </span><span>content </span><span>邮件内容<br></span><span>     */<br></span><span>    </span><span>@Override<br></span><span>    </span><span>public void </span>sendEmail(String to, String from, String subject, String content) <span>throws </span>GeneralSecurityException {<br>            <span>try</span>{<br>                <span>if</span>(from == <span>null</span>){<br>                    from = <span>FROM</span>;<br>                }<br>                <span>//创建默认的MinmeMessage对象<br></span><span>                </span>MimeMessage message = <span>new </span>MimeMessage(getSession(from));<br>                <span>//Set From: 头部头字段<br></span><span>                </span>message.setFrom(<span>new </span>InternetAddress(from));<br>                <span>//Set to: 头部头字段<br></span><span>                </span>message.addRecipient(Message.RecipientType.<span>TO</span>,<span>new </span>InternetAddress(to));<br>                <span>//Set Subject: 头部头字段<br></span><span>                </span>message.setSubject(subject);<br>                <span>//设置消息体<br></span><span>                </span>message.setText(content);<br>                <span>//发送消息<br></span><span>                </span>Transport.<span>send</span>(message);<br>                System.<span>out</span>.println(<span>"发送邮件成功"</span>);<br>            }<span>catch </span>(MessagingException mex){<br>                mex.printStackTrace();<br>            }<br>    }<br><br>    <span>/**<br></span><span>     * 发送邮件<br></span><span>     * </span><span>@param </span><span>to </span><span>收件人邮箱<br></span><span>     * </span><span>@param </span><span>message </span><span>消息实体<br></span><span>     * </span><span>@throws </span><span>GeneralSecurityException<br></span><span>     */<br></span><span>    </span><span>@Override<br></span><span>    </span><span>public void </span>sendEmail(String to, MimeMessage message) <span>throws </span>GeneralSecurityException {<br>            <span>try</span>{<br>                <span>//发送消息<br></span><span>                </span>Transport.<span>send</span>(message);<br>                System.<span>out</span>.println(<span>"发送邮件成功"</span>);<br>            }<span>catch </span>(MessagingException mex){<br>                mex.printStackTrace();<br>            }<br>    }<br><br>    <span>/**<br></span><span>     * 获取session<br></span><span>     * </span><span>@param </span><span>from </span><span>发件人邮箱<br></span><span>     * </span><span>@return<br></span><span>     </span><span>* </span><span>@throws </span><span>GeneralSecurityException<br></span><span>     */<br></span><span>    </span><span>@Override<br></span><span>    </span><span>public </span>Session getSession(<span>final </span>String from) <span>throws </span>GeneralSecurityException {<br>        Session session = <span>null</span>;<br>        <span>if</span>(from.indexOf(<span>"@qq.com"</span>) != -<span>1</span>) {<br>            <span>//指定发送邮件的主机为 smtp.qq.com<br></span><span>            </span>String host = <span>"smtp.qq.com"</span>; <span>//QQ 邮件服务器<br></span><span>            //获取系统属性<br></span><span>            </span>Properties properties = System.<span>getProperties</span>();<br>            <span>//设置邮件服务器<br></span><span>            </span>properties.setProperty(<span>"mail.smtp.host"</span>, host);<br><br>            properties.put(<span>"mail.smtp.auth"</span>, <span>"true"</span>);<br>            <span>//ssl加密<br></span><span>            </span>MailSSLSocketFactory sf = <span>new </span>MailSSLSocketFactory();<br>            sf.setTrustAllHosts(<span>true</span>);<br>            properties.put(<span>"mail.smtp.ssl.enable"</span>, <span>"true"</span>);<br>            properties.put(<span>"mail.smtp.ssl.socketFactory"</span>, sf);<br>            <span>//获取默认session对象<br></span><span>            </span>session = Session.<span>getDefaultInstance</span>(properties, <span>new </span>Authenticator() {<br>                <span>@Override<br></span><span>                </span><span>public </span>PasswordAuthentication getPasswordAuthentication() {<br>                    <span>return new </span>PasswordAuthentication(<span>from</span>, <span>AUTHORIZATIONCODE</span>);<br>                }<br>            });<br>        }<br>        <span>return </span>session;<br>    }<br>}</pre><p><br></p><p>我只是简单的封装了一下，因为qq邮箱有qq邮箱的邮件服务器，所以我写了判断发件人邮箱是否是qq邮箱的代码</p><p>将获取session的代码封装到另一个方法的作用是可以更好的根据不同的邮件服务器来获取不同的session，还可以单独获取到session，就可以在外部创建MimeMessage对象，因为MimeMessage的构造方法上必须要有session参数，所以封装了一个对外开放获取session的方法，就可以独立创建MimeMessage对象了，独立创建MimeMessage对象的好处是可以不受限制，可以传普通的文字内容，也可以传带有附件的内容，亦可以传html内容</p></body>
</html>
