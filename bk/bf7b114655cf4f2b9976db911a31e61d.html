<!DOCTYPE html>
<html>
<head>
<style>body{padding:1.875rem;}</style><meta charset='UTF-8'>
</head>
<body><p>&nbsp;在使用jquery的ajax或vue的axios异步请求方法时都会碰到数据同步不上的问题，举个例子：</p><p>&nbsp; var result;</p><p>&nbsp; $.ajax({</p><p>&nbsp; &nbsp; &nbsp;url: "http://baidu.com",</p><p>&nbsp; &nbsp; &nbsp;type: "post",</p><p>&nbsp; &nbsp; &nbsp;success: function(result){</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;result = result;</p><p>&nbsp; &nbsp; &nbsp;}</p><p>&nbsp; });</p><p>console.log(result);</p><p>输出是为undefined;</p><p>这是因为代码执行会在ajax处理完并返回result之前执行完console.log(result)这条代码，所以这个时候result是还没有赋值才会输出undefined，解决办法：</p><p>&nbsp; &nbsp; &nbsp; &nbsp; 使用async-await，很简单，就是两个关键词，代码：</p><p>&nbsp; &nbsp; &nbsp; &nbsp; var result;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;function setResult(){</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $.ajax({</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; url: "http://baidu.com",</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type: "post",</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success: function(result){</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; result = result;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; });</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;}</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;async function getResult(){</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return await setResult();</p><p>&nbsp; &nbsp; &nbsp; &nbsp; }</p><p>&nbsp; &nbsp; &nbsp; &nbsp; result = getResult();</p><p>&nbsp; &nbsp; &nbsp; &nbsp;console.log(result);</p><p>&nbsp; &nbsp; &nbsp; &nbsp;这样写就会输出请求后的值了，我对这种风格的理解就是没有改变异步请求的方式，只是将需要同步的数据加入到异步里，比如将获取result的结果加入到ajax请求里</p><p><br></p><p><br></p></body>
</html>
