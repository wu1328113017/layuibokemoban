<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

</head>
<body style="padding-top: 50px;">
     <div id="editor"></div>     
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/wangeditor@latest/dist/wangEditor.min.js"
></script>
<script>
	  const E = window.wangEditor
	   //const editor = new E("#div1")
	   const editor = new E(document.getElementById('editor'));
	   // 设置编辑区域高度为 500px
	   editor.config.height = 500;
	   /* editor.config.menus = [
	       'head',
	       'bold',
	       'fontSize',
	       'fontName',
	       'italic',
	       'underline',
	       'strikeThrough',
	       'indent',
	       'lineHeight',
	       'foreColor',
	       'backColor',
	       'link',
	       'list',
	       'todo',
	       'justify',
	       'quote',
	       'emoticon',
	       'image',
	       'video',
	       'table',
	       'code',
	       'splitLine',
	       'undo',
	       'redo',
	   ] */
	   // 配置 server 接口地址
	   editor.config.uploadImgServer = '/api/upload';
	   editor.config.uploadFileName = 'file';
	   editor.config.uploadImgParams = {
	       directory: "/bk/images",
	   }
	   editor.config.uploadImgHooks = {
	       // 上传图片之前
	       before: function(xhr) {
	           /* console.log(xhr)
	   
	           // 可阻止图片上传
	           return {
	               prevent: true,
	               msg: ''
	           } */
	       },
	       // 图片上传并返回了结果，图片插入已成功
	       success: function(xhr) {
	           //console.log('success', xhr)
	       },
	       // 图片上传并返回了结果，但图片插入时出错了
	       fail: function(xhr, editor, resData) {
	           //console.log('fail', resData)
	       },
	       // 上传图片出错，一般为 http 请求的错误
	       error: function(xhr, editor, resData) {
	           //console.log('error', xhr, resData)
	       },
	       // 上传图片超时
	       timeout: function(xhr) {
	           //console.log('timeout')
	       },
	       // 图片上传并返回了结果，想要自己把图片插入到编辑器中
	       // 例如服务器端返回的不是 { errno: 0, data: [...] } 这种格式，可使用 customInsert
	       customInsert: function(insertImgFn, result) {
	           // result 即服务端返回的接口
	           //console.log('customInsert', result)
				
	           // insertImgFn 可把图片插入到编辑器，传入图片 src ，执行函数即可
	           insertImgFn(result.data)
	       }
	   }
	   // 配置 server 接口地址
	   editor.config.uploadVideoServer = '/api/upload';
	   editor.config.uploadVideoParams = {
	       directory: "/bk/images",
	   }
	   editor.config.uploadVideoName = 'file';
	   editor.config.uploadVideoHooks = {
	       // 上传视频之前
	       before: function(xhr) {
	           /* console.log(xhr)
	   
	           // 可阻止视频上传
	           return {
	               prevent: true,
	               msg: '需要提示给用户的错误信息'
	           } */
	       },
	       // 视频上传并返回了结果，视频插入已成功
	       success: function(xhr) {
	           //console.log('success', xhr)
	       },
	       // 视频上传并返回了结果，但视频插入时出错了
	       fail: function(xhr, editor, resData) {
	           //console.log('fail', resData)
	       },
	       // 上传视频出错，一般为 http 请求的错误
	       error: function(xhr, editor, resData) {
	           //console.log('error', xhr, resData)
	       },
	       // 上传视频超时
	       timeout: function(xhr) {
	           //console.log('timeout')
	       },
	       // 视频上传并返回了结果，想要自己把视频插入到编辑器中
	       // 例如服务器端返回的不是 { errno: 0, data: { url : '.....'} } 这种格式，可使用 customInsert
	       customInsert: function(insertVideoFn, result) {
	           // result 即服务端返回的接口
	           //console.log('customInsert', result)
	   
	           // insertVideoFn 可把视频插入到编辑器，传入视频 src ，执行函数即可
	           insertVideoFn(result.data)
	       }
	   }
	   editor.create()
</script>

</body>
</html>
